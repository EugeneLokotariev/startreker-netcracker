<div class="list-group">

  <li class="list-group-item" *ngFor="let carrier of allCarriers 
                              | filter: filterCriteria: filterContent
                              | paginate: {id: 'listing_pagination', itemsPerPage: 10, currentPage: page ,totalItems: totalRec}">

    <div class="row">

      <div class="col-1"
           title="id"
      >
        <span class="badge badge-primary badge-pill idBadge">{{carrier.id}}</span>

      </div>

      <div class="row col-5 offset-6"
           *ngIf="!isForUpdateMessage"
      >

        <div class="col-1 offset-4 offset-lg-8">

          <p data-placement="top" data-toggle="tooltip" title="Edit" (click)="onUpdate(carrier)"
             class="updatePrgph"
          >
            <button 
            class="btn btn-primary btn-md" 
            [disabled] = 'editBut || butGroup.editBut'>
              <i class="fa fa-edit"></i>
            </button>
          </p>

        </div>

        <div class="col-1 offset-1">

          <p data-placement="top" data-toggle="tooltip" title="Delete" (click)="onDelete(carrier.id)" class="deletePrgph">
            <button class="btn btn-danger btn-md" data-title="Delete" data-toggle="modal" data-target="#delete"
                    [disabled] = 'butGroup.deleteBut'><i
              class="fa fa-trash"></i></button>
          </p>

        </div>

      </div>

    </div>

    <form [formGroup]="form" (ngSubmit)="onSubmit()">

      <div class="row">

        <div class="col-md-8">

          <div class="row">

            <h3 class="col-2">Name</h3>
            <h3 class="col-2 offset-3" *ngIf="currentCarrierForUpdate !== carrier">
              {{carrier.username}}</h3>

            <input type="text" class="form-control"
                   [value]="currentCarrierForUpdate.username"
                   formControlName="username" *ngIf="currentCarrierForUpdate === carrier && !isForUpdateMessage"
                   [ngClass]="{
                    'is-invalid':form.get('username').invalid,
                   'is-valid': form.get('username').valid
                   }"
            >

          </div>

          <hr>

          <div class="row">

            <h5 class="col-2">Email</h5>
            <p class="col-2 offset-3" *ngIf="currentCarrierForUpdate !== carrier">
              {{carrier.email}}</p>

            <input type="text" class="form-control"
                   [value]="currentCarrierForUpdate.email"
                   formControlName="email" *ngIf="currentCarrierForUpdate === carrier && !isForUpdateMessage"
                   [ngClass]="{
                    'is-invalid':form.get('email').invalid,
                   'is-valid': form.get('email').valid
                   }"
            >

          </div>

          <hr>

          <div class="row">
            <h5 class="col-2">Telephone</h5>
            <p class="col-2 offset-3" *ngIf="currentCarrierForUpdate !== carrier">
              {{carrier.telephone_number}}</p>


            <input type="tel" class="form-control" formControlName="telephone_number"
                   *ngIf="currentCarrierForUpdate === carrier && !isForUpdateMessage"
                   [value]="currentCarrierForUpdate.telephone_number"
                   [disabled]="isForUpdateMessage"
                   [ngClass]="{
                    'is-invalid':form.get('telephone_number').invalid,
                   'is-valid': form.get('telephone_number').valid
                   }"
            >

          </div>

          <hr>

          <div class="row">
            <h5 class="col-2">Status</h5>
            <div class="col-4 offset-3 alert text-center" *ngIf="currentCarrierForUpdate !== carrier"
                 [ngClass]="{
               'alert-success': (carrier.is_activated === true),
               'alert-danger': (carrier.is_activated === false)
               }"
            >
              {{carrier.is_activated | carrierShowStatus}}
            </div>

          </div>


          <div class="custom-control custom-radio custom-control-inline"
               *ngIf="currentCarrierForUpdate === carrier && !isForUpdateMessage"
          >

            <input type="radio"
                   id="updateActivated"
                   name="is_activated"
                   class="custom-control-input"
                   value="on"
                   formControlName="is_activated"
            >

            <label class="custom-control-label" for="updateActivated">Activated</label>

          </div>

          <div class="custom-control custom-radio custom-control-inline"
               *ngIf="currentCarrierForUpdate === carrier && !isForUpdateMessage"
          >

            <input type="radio"
                   id="updateDeactivated"
                   name="is_activated"
                   class="custom-control-input"
                   value="off"
                   formControlName="is_activated"
            >

            <label class="custom-control-label" for="updateDeactivated">Deactivated</label>

          </div>


          <hr>

          <div class="row">

            <h5 class="col-2">Date of creation</h5>
            <p class="col-2 offset-3">{{carrier.user_created_date | date}}</p>

          </div>

          <hr>

          <span style='color:red;'
                *ngIf="currentCarrierForUpdate === carrier && isEditButtonBlockedAfterSubmit && !isForUpdateMessage">{{updateError}}</span>

          <div class="row" *ngIf="currentCarrierForUpdate === carrier && isEditButtonBlockedAfterSubmit && !isForUpdateMessage">
              <button class="btn btn-success col-4"
              type="submit"
              [disabled]="form.invalid || butGroup.updateBut">Edit</button>
          </div>

          <div class="alert alert-success text-center"
               *ngIf="isForUpdateMessage && currentCarrierForUpdate === carrier"
          >
            <h4>
              Updated
            </h4>

          </div>

        </div>

      </div>

    </form>

  </li>


</div>

<hr>

<div class="clearfix"></div>
<div style="text-align: center">
  <pagination-controls id='listing_pagination'
                        (pageChange)="onChange($event)"
                        previousLabel=""
                        nextLabel=""></pagination-controls>
    
</div>